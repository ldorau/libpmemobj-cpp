dist: trusty

sudo: required

language: cpp

services:
  - docker

env:
  global:
    - GITHUB_REPO=pmem/libpmemobj-cpp
    - DOCKERHUB_REPO=ldorau/libpmemobj-cpp
  matrix:
    - TYPE=release OS=archlinux-base OS_VER=latest
    - TYPE=release OS=centos OS_VER=8
    - TYPE=release OS=debian OS_VER=testing
    - TYPE=release OS=debian OS_VER=unstable
    - TYPE=release OS=fedora OS_VER=rawhide
    - TYPE=release OS=opensuse-leap OS_VER=latest
    - TYPE=release OS=opensuse-tumbleweed OS_VER=latest
    - TYPE=release OS=ubuntu OS_VER=rolling

before_install:
  - echo $TRAVIS_COMMIT_RANGE
  - export HOST_WORKDIR=`pwd`
  - cd utils/docker
  - ./pull-or-rebuild-image.sh

script:
  - images/push-image.sh $OS-$OS_VER

after_success:
  - date
